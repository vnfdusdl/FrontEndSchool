<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <title></title>
    </head>
    <body>
        <!-- 실무에서는 onclick 이렇게 인라인으로 사용하지 않는다. -->
        <!-- 원래는 이벤트를 걸어주는 게 좋음 클릭을 할 때 data가 rederTable에 들어갈것 정보가 호출되는 거 함수에 data가 인자로 들어가는거니까 -->
        <button onclick="renderTable(data)">데이터호출</button>
        <button onclick="averageAge(data)">나이평균</button>

        <!-- table>(thead>tr>th*11)+tbody -->
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th onclick="sortTable('index')">index</th>
                    <th onclick="sortTable('picture')">picture</th>
                    <th onclick="sortTable('age')">나이</th>
                    <th onclick="sortTable('eyeColor')">eyeColor</th>
                    <th onclick="sortTable('name')">이름 정렬</th>
                    <th onclick="sortTable('gender')">성별 정렬</th>
                    <th onclick="sortTable('company')">회사이름 정렬</th>
                    <th onclick="sortTable('email')">이메일 정렬</th>
                    <th onclick="sortTable('phone')">휴대폰번호 정렬</th>
                    <th onclick="sortTable('address')">주소 정렬</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <script src="024data.js"></script>
        <script>
            function averageAge(data) {
                let sum = 0;
                data.forEach( dataset => {
                    sum += dataset.age;
                });
                console.log(sum/data.length);
            }

            let click = true;
            function sortTable(key) {
                if (click) {
                    click = false;
                    // 어디서도 오류를 안 내는 만능 코드
                    data.sort((a, b) =>
                        a[key] < b[key] ? -1 : a[key] > b[key] ? 1 : 0
                    );
                } else {
                    click = true;
                    data.sort((a, b) =>
                        a[key] > b[key] ? -1 : a[key] < b[key] ? 1 : 0
                    );
                }
                renderTable(data);
            }
            function genderSort(data) {
                data.sort(function (a, b) {
                    if (a.gender > b.gender) {
                        return 1;
                    }
                    if (a.gender < b.gender) {
                        return -1;
                    }
                    return 0;
                });
                renderTable(data);
            }
            function companySort(data) {
                data.sort(function (a, b) {
                    if (a.company > b.company) {
                        return 1;
                    }
                    if (a.company < b.company) {
                        return -1;
                    }
                    return 0;
                });
                renderTable(data);
            }
            function addressSort(data) {
                data.sort(function (a, b) {
                    if (a.address > b.address) {
                        return 1;
                    }
                    if (a.address < b.address) {
                        return -1;
                    }
                    return 0;
                });
                renderTable(data);
            }
            function phoneSort(data) {
                data.sort(function (a, b) {
                    if (a.phone > b.phone) {
                        return 1;
                    }
                    if (a.phone < b.phone) {
                        return -1;
                    }
                    return 0;
                });
                renderTable(data);
            }

            function emailSort(data) {
                data.sort(function (a, b) {
                    if (a.email > b.email) {
                        return 1;
                    }
                    if (a.email < b.email) {
                        return -1;
                    }
                    return 0;
                });
                renderTable(data);
            }
            function nameSort(data) {
                data.sort(function (a, b) {
                    if (a.name < b.name) {
                        return -1;
                    }
                    if (a.name > b.name) {
                        return 1;
                    }
                    return 0;
                });
                renderTable(data);
            }
            function ageSort(data) {
                //sort는 배열을 수정한다.
                data.sort(function (a, b) {
                    if (a.age < b.age) {
                        return 1;
                    }
                    if (a.age > b.age) {
                        return -1;
                    }
                    return 0;
                });
                renderTable(data); //정렬한 상태로 데이터를 다시 정렬해줘야하니까
            }
            // 그냥 처음부터 데이터를 보여주고 싶으면 function으로 안 하고 그냥 for문만 있으면 되겠죠
            // tbodyData 안에 각각 문자열로 들어갈 것.
            function renderTable(data) {
                let tbodyData = [];
                for (const iterator of data) {
                    tbodyData.push(`
                    <tr>
                    <td>${iterator.index}</td>
                    <td>${iterator.picture}</td>
                    <td>${iterator.age}</td>
                    <td>${iterator.eyeColor}</td>
                    <td>${iterator.name}</td>
                    <td>${iterator.gender}</td>
                    <td>${iterator.company}</td>
                    <td>${iterator.email}</td>
                    <td>${iterator.phone}</td>
                    <td>${iterator.address}</td>
                </tr>
                `);
                }
                //tbody 안에 innerHTML로 넣어줄거야.
                document.querySelector('.table > tbody').innerHTML =
                    tbodyData.join(''); //배열을 문자열로 만들기 위해서 join('')을 함
                // ['1','2','3'].join('') => '1234'
                // ['1','2','3'].join('!') => '1!2!3!4'
            }
        </script>
    </body>
</html>
